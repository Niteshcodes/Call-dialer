<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dial-Pad</title>
    <link rel="stylesheet" href="./style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <main class="d-flex bg-danger row-2 h-100">
      <div
        class="dialpad w-75 d-flex justify-content-center h-100 align-items-center"
      >
        <div class="container text-center d-flex flex-column">
          <div
            onclick="btnhandle(event)"
            class="row w-50 justify-content-center align-items-center m-auto border border-2"
          >
            <div class="d-flex justify-content-between">
              <p id="msg" class="p-2"></p>
              <button class="btn btn-dark h-25 my-3" onclick="clearmsg()">
                clear
              </button>
            </div>

            <div class="col text-center">
              <div class="row p-2">
                <button value="1" class="btn btn-outline-light">1</button>
              </div>
              <div class="row p-2">
                <button value="4" class="btn btn-outline-light">4</button>
              </div>
              <div class="row p-2">
                <button value="7" class="btn btn-outline-light">7</button>
              </div>
              <div class="row p-2">
                <button value="*" class="btn btn-outline-light">*</button>
              </div>
            </div>
            <div class="col">
              <div class="row p-2">
                <button value="2" class="btn btn-outline-light">2</button>
              </div>
              <div class="row p-2">
                <button value="5" class="btn btn-outline-light">5</button>
              </div>
              <div class="row p-2">
                <button value="8" class="btn btn-outline-light">8</button>
              </div>
              <div class="row p-2">
                <button value="0" class="btn btn-outline-light">0</button>
              </div>
            </div>
            <div class="col">
              <div class="row p-2">
                <button value="3" class="btn btn-outline-light">3</button>
              </div>
              <div class="row p-2">
                <button value="6" class="btn btn-outline-light">6</button>
              </div>
              <div class="row p-2">
                <button value="9" class="btn btn-outline-light">9</button>
              </div>
              <div class="row p-2">
                <button value="#" class="btn btn-outline-light">#</button>
              </div>
            </div>
          </div>
          <button
            class="btn btn-outline-success px-5 fs-5 d-flex m-auto rounded-4 my-3 text-center text-white"
            onclick="callBtn()"
          >
            Call
          </button>
        </div>
      </div>
      <div class="history" id="history">
        <div>1</div>
      </div>
    </main>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>

    <script>
      var hist = [];
      var repete = {};
      var repetet = 1;
      const msg = document.getElementById("msg");
      const btnhandle = (e) => {
        if (e.target.value !== undefined) {
          msg.innerText = msg.innerHTML + e.target.value;
        }
      };

      const callBtn = () => {
        if (msg.innerText !== "") {
          const msgtxt = msg.innerText;

          // console.log("first",msgtxt)

          if (hist.includes(msgtxt)) {
            const ind = hist.indexOf(msgtxt);
            let a = hist.splice(ind, 1)[0];
            hist.push(a);
            repete[a] = repete[a] + 1;
            console.log("repete", repete);
          } else {
            hist.push(msgtxt);
            repete[msgtxt] = repetet;
            // console.log("repete",repete)
          }
          // console.log(hist)
          clearmsg();
        }
        // console.log(hist)
        history();
      };
      const clearmsg = () => {
        console.log(msg.innerText);
        msg.innerHTML = "";
        // console.log(hist)
      };

      // const history = () => {
      //   let ele = document.getElementById("history");
      //   let d = document.createElement("li");
      //   let b = document.createElement("ul");

      //   ele.appendChild("h1");
      //   console.log("history", ele);
      // };
      const history = () => {

        let ele = document.getElementById("history");
        ele.innerHTML=''
        let numb=hist.reverse();
        for (x of hist) {
          let b = document.createElement("ul");
          let listItem = document.createElement("li");
          listItem.textContent = x +" repete-> "+ repete[x];
          b.appendChild(listItem);
          ele.appendChild(b);
        }

        console.log("history", ele);
      };
    </script>
  </body>
</html>
